# ===========================
# ARASH EXTERNAL API SERVICE - CONFIGURATION
# ===========================
# IMPORTANT: Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control!

# ===========================
# CORE CONFIGURATION
# ===========================

# Environment identifier (dev, stage, prod)
# Used for logging and monitoring to identify which environment is running
# Note: Actual behavior (log levels, API docs, CORS) is controlled by separate variables below
ENVIRONMENT=dev

# AI Service URL
AI_SERVICE_URL=https://your-ai-service-url.example.com

# Session timeout in minutes
SESSION_TIMEOUT_MINUTES=30

# ===========================
# TELEGRAM CONFIGURATION (PUBLIC)
# ===========================

# Telegram Bot Token (Get from @BotFather)
# SECURITY: Keep this secret! Regenerate if exposed
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Default model for Telegram users (they can switch from the list below)
TELEGRAM_DEFAULT_MODEL=google/gemini-2.0-flash-001

# Available models for Telegram users (comma-separated, limited list)
# These are free/cheap models suitable for public use
TELEGRAM_MODELS=google/gemini-2.0-flash-001,google/gemini-2.5-flash,deepseek/deepseek-chat-v3-0324,openai/gpt-4o-mini,google/gemma-3-1b-it

# Rate limit (messages per minute)
TELEGRAM_RATE_LIMIT=20

# Maximum conversation history
TELEGRAM_MAX_HISTORY=10

# Available commands (comma-separated)
TELEGRAM_COMMANDS=start,help,status,clear,model,models

# Admin users (comma-separated usernames without @)
TELEGRAM_ADMIN_USERS=admin1,admin2

# Optional: Webhook URL (leave empty for polling mode)
TELEGRAM_WEBHOOK_URL=

# ===========================
# INTERNAL CONFIGURATION (PRIVATE)
# ===========================

# Default model for internal users
INTERNAL_DEFAULT_MODEL=openai/gpt-5-chat

# Available models (comma-separated, no spaces)
INTERNAL_MODELS=google/gemini-2.0-flash-001,deepseek/deepseek-chat-v3-0324,openai/gpt-4o-mini,google/gemma-3-1b-it,anthropic/claude-sonnet-4,openai/gpt-4.1,openai/gpt-4o-search-preview,x-ai/grok-4,meta-llama/llama-4-maverick,google/gemini-2.5-flash,openai/gpt-5-chat

# Rate limit for internal users
INTERNAL_RATE_LIMIT=60

# Maximum conversation history
INTERNAL_MAX_HISTORY=30

# Internal API authentication key
# SECURITY: Generate a strong random key
INTERNAL_API_KEY=your_secure_random_api_key_here

# Internal webhook secret for verification
INTERNAL_WEBHOOK_SECRET=your_webhook_secret_here

# Internal admin users (comma-separated)
INTERNAL_ADMIN_USERS=h_hoseeini,f_taheri

# ===========================
# LOGGING & MONITORING (Generic - Set by DevOps)
# ===========================

# Log level (Generic - set by DevOps per deployment)
# DevOps sets: DEBUG for dev, INFO for stage, WARNING for prod
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=DEBUG

# Log file location
LOG_FILE=logs/arash_api_service.log

# Timestamp display mode
# Options: utc (UTC only), ir (Iranian/Jalali only), both (both timestamps)
LOG_TIMESTAMP=both

# Color output control
# Options: auto (auto-detect TTY), true (always enabled), false (always disabled)
LOG_COLOR=auto

# Force disable colors (set to 1 to disable, 0 to allow)
# Overrides LOG_COLOR when set to 1
NO_COLOR=0

# Timestamp precision
# Options: 3 (milliseconds), 6 (microseconds)
LOG_TIMESTAMP_PRECISION=3

# ===========================
# OPTIONAL FEATURES
# ===========================

# Enable image processing
ENABLE_IMAGE_PROCESSING=true

# Maximum image size in MB
MAX_IMAGE_SIZE_MB=20

# ===========================
# SUPER ADMIN AUTHENTICATION (Infrastructure Level)
# ===========================
# TWO-PATH AUTHENTICATION SYSTEM:
# 1. Super Admins: Environment variable (THIS SETTING) - NOT in database
# 2. Team API Keys: Database-backed - for external clients

# Super Admin API Keys (Comma-separated)
# These keys grant full access to /api/v1/admin/* endpoints
# SECURITY:
# - NEVER expose these keys to external clients
# - Store in Kubernetes Secrets in production
# - Separate from team API keys in database
# - Can have multiple super admin keys (comma-separated)
# Example: "key1_abc123,key2_def456,key3_ghi789"
SUPER_ADMIN_API_KEYS=

# ===========================
# DATABASE CONFIGURATION (Generic - Set by DevOps)
# ===========================
# PostgreSQL database for API keys, teams, and usage tracking
# Note: Chat history is NOT stored here (handled by AI service)

# IMPORTANT: DevOps sets these parameters differently for each deployment
# - In dev K8s deployment: Set to dev database
# - In stage K8s deployment: Set to stage database
# - In prod K8s deployment: Set to prod database
#
# Benefits:
# 1. Only 5 parameters to manage (not 15)
# 2. Each environment only has credentials it needs (security)
# 3. Kubernetes-friendly (works with ConfigMaps/Secrets)
# 4. Simpler for DevOps team

DB_HOST=localhost
DB_PORT=5432
DB_USER=arash_user
DB_PASSWORD=your_secure_password_here
DB_NAME=arash_db

# Redis URL for session storage (optional)
REDIS_URL=

# ===========================
# API SERVER CONFIGURATION
# ===========================

# API server host and port (must be 3000 for K8s deployment)
API_HOST=0.0.0.0
API_PORT=3000

# ===========================
# TELEGRAM BOT INTEGRATION
# ===========================

# Run telegram bot integrated with main service (true/false)
# Set to true for single container deployment
RUN_TELEGRAM_BOT=true

# ===========================
# API DOCS CONFIGURATION (Generic - Set by DevOps)
# ===========================
# Control whether Swagger/OpenAPI docs are enabled
# DevOps sets: true for dev/stage, false for prod
ENABLE_API_DOCS=true

# ===========================
# CORS CONFIGURATION (Generic - Set by DevOps)
# ===========================
# CORS allowed origins (comma-separated, or "*" for all)
# DevOps sets: "*" for dev/stage, specific domains for prod
# Example for prod: https://arash-api.irisaprime.ir,https://arash-admin.irisaprime.ir
CORS_ORIGINS=*